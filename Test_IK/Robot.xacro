<?xml version="1.0"?>
<robot name="five_dof_cobot_rollJ4" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- =========================
       ðŸ”§ ì‚¬ìš©ìž ìž…ë ¥ íŒŒë¼ë¯¸í„° ëª¨ìŒ
       ========================= -->
  <!-- ë§í¬ ê¸¸ì´/ì˜¤í”„ì…‹ (m) -->
  <xacro:property name="L1" value="0.13461"/>   <!-- base->link1 zë†’ì´ --> <!-- BASEì—ì„œ MAIN SHAFT 134.61mm -->
  <xacro:property name="L2" value="0.0475"/>    <!-- link1->link2 ê¸¸ì´ --> <!-- 1ë²ˆì¶• ì¢…ë™ì¶• - main shaft 47.5 mm -->
  <xacro:property name="L3" value="0.075"/>     <!-- link2->link3 ê¸¸ì´ --> <!-- Main shaft - ë‹¤ìŒ shaft 75mm -->
  <xacro:property name="L4" value="0.24168"/>   <!-- ì†ëª© í•˜ìš°ì§• ê¸¸ì´(ì„ íƒ) --> <!-- ë‹¤ìŒ shaft - ê·¸ë¦¬í¼ ë¶€ë¶„ ê¸°ì–´ ì¤‘ì‹¬ê¹Œì§€ ê±°ë¦¬ 123mm (â€» ìˆ˜ì¹˜ í™•ì¸ í•„ìš”) -->
  <xacro:property name="TOOL" value="0.08597"/> <!-- EE í”Œëžœì§€~íˆ´íŒ ì˜¤í”„ì…‹ --> <!-- ê·¸ë¦¬í¼ ë¶€ë¶„ ê¸°ì–´ ì¤‘ì‹¬ - ê·¸ë¦¬í¼ ëë‹¨ ê¹Œì§€ ê±°ë¦¬ 85.97mm -->

  <!-- ì§ˆëŸ‰ (kg)  ðŸ”´ì‹¤ì¸¡ìœ¼ë¡œ êµì²´ -->
  <xacro:property name="m1" value="3.183"/>  <!-- ðŸ”´FILL -->
  <xacro:property name="m2" value="0.230"/>  <!-- ðŸ”´FILL -->
  <xacro:property name="m3" value="0.400"/>  <!-- ðŸ”´FILL -->
  <xacro:property name="m4" value="0.200"/>  <!-- ðŸ”´FILL -->
  <xacro:property name="m5" value="0.100"/>  <!-- ðŸ”´FILL -->

  <!-- ê´€ì„±(ëŒ€ê°ì„±ë¶„) [kgÂ·m^2] : ê°„ì´ê°’/ì‹¤ì¸¡ì¹˜ë¡œ êµì²´ -->
  <!-- ðŸ”´ ì•„ëž˜ ê°’ì€ "ì˜ˆì‹œ" ìˆ˜ì¤€ì´ë¯€ë¡œ ë°˜ë“œì‹œ í˜„ì‹¤ì ì¸ ê°’ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš” -->
  <xacro:property name="Ixx1" value="0.020"/> <xacro:property name="Iyy1" value="0.040"/> <xacro:property name="Izz1" value="0.060"/> <!-- ðŸ”´FILL -->
  <xacro:property name="Ixx2" value="0.010"/> <xacro:property name="Iyy2" value="0.030"/> <xacro:property name="Izz2" value="0.050"/> <!-- ðŸ”´FILL -->
  <xacro:property name="Ixx3" value="0.002"/> <xacro:property name="Iyy3" value="0.020"/> <xacro:property name="Izz3" value="0.010"/> <!-- ðŸ”´FILL -->
  <xacro:property name="Ixx4" value="0.001"/> <xacro:property name="Iyy4" value="0.030"/> <xacro:property name="Izz4" value="0.002"/> <!-- ðŸ”´FILL -->
  <xacro:property name="Ixx5" value="0.0002"/> <xacro:property name="Iyy5" value="0.0002"/> <xacro:property name="Izz5" value="0.0002"/> <!-- ðŸ”´FILL -->

  <!-- ì¡°ì¸íŠ¸ ì œí•œ(ë¼ë””ì•ˆ/ì´ˆÂ·NÂ·m)
       ðŸ”´ ì§€ê¸ˆì€ RViz/MoveItì—ì„œ ì •ìƒ ë™ìž‘í•˜ê¸° ìœ„í•œ "í˜„ì‹¤ì ì¸ ê¸°ë³¸ê°’"ìœ¼ë¡œ ì„¤ì •
       (ë¬´í•œíšŒì „ì´ë©´ continuousë¡œ ë°”ê¾¸ëŠ” ê²Œ ì •ì„) -->
  <xacro:property name="j1_lower" value="-3.14159"/> <xacro:property name="j1_upper" value="3.14159"/> <xacro:property name="j1_vel" value="2.5"/>
  <xacro:property name="j2_lower" value="-2.61799"/> <xacro:property name="j2_upper" value="2.61799"/> <xacro:property name="j2_vel" value="2.5"/>
  <xacro:property name="j3_lower" value="-2.61799"/> <xacro:property name="j3_upper" value="2.61799"/> <xacro:property name="j3_vel" value="2.5"/>
  <xacro:property name="j4_lower" value="-3.14159"/> <xacro:property name="j4_upper" value="3.14159"/> <xacro:property name="j4_vel" value="2.5"/>
  <xacro:property name="j5_lower" value="-2.61799"/> <xacro:property name="j5_upper" value="2.61799"/> <xacro:property name="j5_vel" value="2.5"/>

  <!-- êµ¬ë™ë¶€/ê°ì†ë¹„(ë¬¸ì„œí™”/ì œì–´ìš©) ðŸ”´ ì‹¤ ìŠ¤íŽ™ìœ¼ë¡œ êµì²´ -->
  <xacro:property name="belt_type" value="2GT-5mm"/>
  <xacro:property name="gear_ratio_j1" value="3"/>   <!-- ðŸ”´FILL -->
  <xacro:property name="gear_ratio_j2" value="4"/>   <!-- ðŸ”´FILL -->
  <xacro:property name="gear_ratio_j3" value="40"/>  <!-- ðŸ”´FILL -->
  <xacro:property name="gear_ratio_j4" value="3"/>   <!-- ðŸ”´FILL -->
  <xacro:property name="gear_ratio_j5" value="3"/>   <!-- ðŸ”´FILL -->

  <!-- ë§í¬ ìƒ‰ìƒ(Material) -->
  <material name="mat_base"><color rgba="0.25 0.25 0.25 1.0"/></material>
  <material name="mat_l1"><color rgba="0.85 0.10 0.10 1.0"/></material>
  <material name="mat_l2"><color rgba="0.10 0.55 0.90 1.0"/></material>
  <material name="mat_l3"><color rgba="0.10 0.75 0.25 1.0"/></material>
  <material name="mat_l4"><color rgba="0.90 0.60 0.10 1.0"/></material>
  <material name="mat_l5"><color rgba="0.60 0.20 0.90 1.0"/></material>
  <material name="mat_ee"><color rgba="0.90 0.90 0.90 1.0"/></material>

  <!-- ========== ë§í¬ ì •ì˜ ========== -->
  <link name="base_link">
    <visual>
      <geometry><cylinder radius="0.08" length="0.04"/></geometry>
      <material name="mat_base"/>
    </visual>
    <collision>
      <geometry><cylinder radius="0.08" length="0.04"/></geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="4.113"/> <!-- ðŸ”´FILL -->
      <inertia ixx="0.0332" iyy="0.12002" izz="0.12021" ixy="0" ixz="0" iyz="0"/> <!-- ðŸ”´FILL -->
    </inertial>
  </link>

  <link name="link1">
    <visual>
      <origin xyz="0 0 ${L1/2}" rpy="0 0 0"/>
      <geometry><cylinder radius="0.05" length="${L1}"/></geometry>
      <material name="mat_l1"/>
    </visual>
    <collision>
      <origin xyz="0 0 ${L1/2}" rpy="0 0 0"/>
      <geometry><cylinder radius="0.05" length="${L1}"/></geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 ${L1/2}" rpy="0 0 0"/>
      <mass value="${m1}"/>
      <inertia ixx="${Ixx1}" iyy="${Iyy1}" izz="${Izz1}" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

  <link name="link2">
    <visual>
      <origin xyz="${L2/2} 0 0" rpy="0 0 0"/>
      <geometry><box size="${L2} 0.05 0.05"/></geometry>
      <material name="mat_l2"/>
    </visual>
    <collision>
      <origin xyz="${L2/2} 0 0" rpy="0 0 0"/>
      <geometry><box size="${L2} 0.05 0.05"/></geometry>
    </collision>
    <inertial>
      <origin xyz="${L2/2} 0 0" rpy="0 0 0"/>
      <mass value="${m2}"/>
      <inertia ixx="${Ixx2}" iyy="${Iyy2}" izz="${Izz2}" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

  <link name="link3">
    <visual>
      <origin xyz="${L3/2} 0 0" rpy="0 0 0"/>
      <geometry><box size="${L3} 0.045 0.045"/></geometry>
      <material name="mat_l3"/>
    </visual>
    <collision>
      <origin xyz="${L3/2} 0 0" rpy="0 0 0"/>
      <geometry><box size="${L3} 0.045 0.045"/></geometry>
    </collision>
    <inertial>
      <origin xyz="${L3/2} 0 0" rpy="0 0 0"/>
      <mass value="${m3}"/>
      <inertia ixx="${Ixx3}" iyy="${Iyy3}" izz="${Izz3}" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

  <link name="link4">
    <visual>
      <origin xyz="${L4/2} 0 0" rpy="0 0 0"/>
      <geometry><box size="${L4} 0.04 0.04"/></geometry>
      <material name="mat_l4"/>
    </visual>
    <collision>
      <origin xyz="${L4/2} 0 0" rpy="0 0 0"/>
      <geometry><box size="${L4} 0.04 0.04"/></geometry>
    </collision>
    <inertial>
      <origin xyz="${L4/2} 0 0" rpy="0 0 0"/>
      <mass value="${m4}"/>
      <inertia ixx="${Ixx4}" iyy="${Iyy4}" izz="${Izz4}" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

  <link name="link5">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><box size="0.05 0.04 0.04"/></geometry>
      <material name="mat_l5"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><box size="0.05 0.04 0.04"/></geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="${m5}"/>
      <inertia ixx="${Ixx5}" iyy="${Iyy5}" izz="${Izz5}" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

  <link name="ee_link">
    <visual>
      <origin xyz="${TOOL/2} 0 0" rpy="0 0 0"/>
      <geometry><cylinder radius="0.02" length="${TOOL}"/></geometry>
      <material name="mat_ee"/>
    </visual>
    <collision>
      <origin xyz="${TOOL/2} 0 0" rpy="0 0 0"/>
      <geometry><cylinder radius="0.02" length="${TOOL}"/></geometry>
    </collision>
  </link>

  <!-- ========== ì¡°ì¸íŠ¸ ì •ì˜ (ì¶• ë°©í–¥ ê³ ì •) ========== -->
  <!-- J1: Base Yaw (ì¢Œìš° íšŒì „, zì¶•) -->
  <joint name="joint1_base_yaw" type="revolute">
    <parent link="base_link"/><child link="link1"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="${j1_lower}" upper="${j1_upper}" velocity="${j1_vel}" effort="101.2"/> <!-- ðŸ”´FILL -->
  </joint>

  <!-- J2: Shoulder Pitch (ìœ„/ì•„ëž˜, yì¶•) -->
  <joint name="joint2_shoulder_pitch" type="revolute">
    <parent link="link1"/><child link="link2"/>
    <origin xyz="0 0 ${L1}" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="${j2_lower}" upper="${j2_upper}" velocity="${j2_vel}" effort="33.6"/> <!-- ðŸ”´FILL -->
  </joint>

  <!-- J3: Elbow Pitch (ìœ„/ì•„ëž˜, yì¶•) -->
  <joint name="joint3_elbow_pitch" type="revolute">
    <parent link="link2"/><child link="link3"/>
    <origin xyz="${L2} 0 0" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="${j3_lower}" upper="${j3_upper}" velocity="${j3_vel}" effort="33.6"/> <!-- ðŸ”´FILL -->
  </joint>

  <!-- âœ… J4: Wrist ROLL (ë¹„í‹€ê¸°, xì¶•) -->
  <joint name="joint4_wrist_roll" type="revolute">
    <parent link="link3"/><child link="link4"/>
    <origin xyz="${L3} 0 0" rpy="0 0 0"/>
    <axis xyz="1 0 0"/>
    <limit lower="${j4_lower}" upper="${j4_upper}" velocity="${j4_vel}" effort="33.6"/> <!-- ðŸ”´FILL -->
  </joint>

  <!-- J5: Wrist Pitch (ìœ„/ì•„ëž˜, yì¶•) -->
  <joint name="joint5_wrist_pitch" type="revolute">
    <parent link="link4"/><child link="link5"/>
    <origin xyz="${L4} 0 0" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="${j5_lower}" upper="${j5_upper}" velocity="${j5_vel}" effort="25.2"/> <!-- ðŸ”´FILL -->
  </joint>

  <!-- EE ê³ ì • -->
  <joint name="joint_ee_fixed" type="fixed">
    <parent link="link5"/><child link="ee_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <!-- (ì„ íƒ) ros2_controlìš© transmission/ros2_control ë¸”ë¡ì€ ì‹¤ì œ êµ¬ë™ ìŠ¤íŽ™ í™•ì • í›„ ì¶”ê°€ -->
</robot>
